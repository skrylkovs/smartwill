# Функциональность для наследников

## Обзор

В приложение SmartWill добавлена новая функциональность, которая позволяет наследникам просматривать и управлять завещаниями, где они указаны как наследники.

## Новые возможности

### 1. Вкладка "Мое наследство"

- **Местоположение**: Третья вкладка в навигации после "Создать завещание" и "Мои завещания"
- **Назначение**: Позволяет наследникам просматривать все завещания, где они указаны как наследники

### 2. Автоматический поиск завещаний

Система автоматически:
- Сканирует все созданные завещания в фабрике
- Проверяет адрес наследника в каждом завещании
- Отображает только те завещания, где текущий пользователь является наследником

### 3. Информационная панель

Для каждого найденного завещания отображается:
- **Личная информация**: Имя и роль наследника
- **Адрес владельца**: Кто создал завещание
- **Финансовая информация**:
  - Доступная сумма в завещании
  - Сумма за одну выплату
  - Общий лимит выплат
- **Частота выплат**: Как часто можно получать средства
- **Статус**: Готово ли завещание к получению средств

### 4. Получение средств

- **Кнопка "Получить средства"**: Позволяет наследнику инициировать перевод средств
- **Проверка условий**: Кнопка активна только если есть доступные средства
- **Безопасность**: Использует метод `transferToHeir()` из смарт-контракта

### 5. Статистика наследства

Блок статистики показывает:
- Общее количество завещаний, где пользователь является наследником
- Общую сумму доступных средств
- Количество завещаний, готовых к получению средств

## Технические детали

### Новые файлы

1. **`src/components/HeirWills.tsx`** - Основной компонент для наследников
   - Поиск и отображение завещаний
   - Функциональность получения средств
   - Статистика и информационные панели

### Изменения в существующих файлах

1. **`src/App.tsx`**:
   - Добавлен импорт компонента `HeirWills`
   - Изменена система навигации с boolean на enum для поддержки трех вкладок
   - Добавлена третья кнопка навигации "Мое наследство"

### Интерфейсы

```typescript
interface HeirWillInfo {
    address: string;           // Адрес контракта завещания
    balance: string;           // Доступная сумма
    ownerAddress: string;      // Адрес владельца завещания
    heirName: string;          // Имя наследника
    heirRole: string;          // Роль наследника
    transferAmount: string;    // Сумма за одну выплату
    transferFrequency: string; // Частота выплат в секундах
    limit: string;             // Общий лимит выплат
    canClaim: boolean;         // Можно ли получить средства
    nextClaimTime: string;     // Время следующей возможной выплаты
}
```

## Пользовательский интерфейс

### Дизайн
- **Зеленая цветовая схема**: Отличается от фиолетовой схемы владельца
- **Иконка подарка (FaGift)**: Символизирует наследство
- **Адаптивный дизайн**: Работает на всех устройствах
- **Информативные карточки**: Четкое отображение всей важной информации

### Взаимодействие
- **Плавные анимации**: При наведении и взаимодействии
- **Статусные индикаторы**: Показывают готовность к получению средств
- **Уведомления**: Toast-сообщения о статусе операций

## Безопасность

1. **Проверка адреса**: Система проверяет, действительно ли пользователь является наследником
2. **Валидация контракта**: Проверка существования и корректности смарт-контракта
3. **Обработка ошибок**: Graceful handling всех возможных ошибок блокчейна

## Использование

1. **Подключите кошелек** MetaMask к приложению
2. **Перейдите на вкладку "Мое наследство"**
3. **Просмотрите доступные завещания**, где вы указаны как наследник
4. **Нажмите "Получить средства"** для завещаний, готовых к выплате
5. **Подтвердите транзакцию** в MetaMask

## Ограничения

- Получение средств возможно только при соблюдении условий завещания
- Требуется подключение к сети Arbitrum Sepolia
- Необходимо наличие ETH для оплаты газа транзакций

## Будущие улучшения

1. **Уведомления**: Push-уведомления о доступности новых выплат
2. **История**: Отображение истории полученных выплат
3. **Расширенная аналитика**: Графики и детальная статистика
4. **Мультисеть**: Поддержка других блокчейнов 